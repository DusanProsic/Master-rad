<main class="main">
  <header class="topbar">
  <div class="container topbar-inner">
    <h1 class="page-title">Dashboard Overview</h1>

  </div>
</header>
  <div class="container page">
    <!-- Summary cards -->
    <section class="grid cards-3">
      <article class="card stat-card">
        <p class="stat-title">Income</p>
        <div class="stat-value">{{ (totals$ | async)?.income | currency:'USD':'symbol':'1.0-0' }}</div>
      </article>

      <article class="card stat-card">
        <p class="stat-title">Expenses</p>
        <div class="stat-value">{{ (totals$ | async)?.expense | currency:'USD':'symbol':'1.0-0' }}</div>
      </article>

      <article class="card stat-card">
        <p class="stat-title">Savings</p>
        <div class="stat-value">{{ (totals$ | async)?.savings | currency:'USD':'symbol':'1.0-0' }}</div>
      </article>
    </section>

    <!-- Chart + Monthly summary -->
    <section class="grid grid-2 dashboard-split">
      <article class="card chart-card">
        <app-finance-chart [totals$]="totals$"></app-finance-chart>
      </article>

      <article class="card monthly-card" *ngIf="monthlyTotals">
        <h3 class="section-title">This Month</h3>
        <div class="monthly-rows">
          <div><strong>Income:</strong> {{ monthlyTotals.income | currency:'USD':'symbol':'1.0-0' }}</div>
          <div><strong>Expenses:</strong> {{ monthlyTotals.expense | currency:'USD':'symbol':'1.0-0' }}</div>
          <div><strong>Savings:</strong> {{ (monthlyTotals.income - monthlyTotals.expense) | currency:'USD':'symbol':'1.0-0' }}</div>
        </div>
      </article>
    </section>

    <!-- Goals preview -->
    <section class="card goals-preview">
      <div class="section-header">
        <h3 class="section-title">Goals</h3>
        <button class="btn-ghost" (click)="goTo('/goals')">Open Goals</button>
      </div>
      <app-budget-goals [displayOnly]="true"></app-budget-goals>
    </section>

    <!-- Upcoming reminders -->
    <section class="card dashboard-reminders">
      <div class="section-header">
        <h3 class="section-title">Upcoming Reminders</h3>
        <button class="btn-ghost" (click)="goTo('/calendar')">Open Calendar</button>
      </div>
      <ul class="reminder-list">
        <li *ngFor="let r of upcomingReminders$ | async; trackBy: trackByReminder">
          <span>{{ r.date }} {{ r.time }} â€” {{ r.message }}</span>
        </li>
      </ul>
    </section>
  </div>
</main>
